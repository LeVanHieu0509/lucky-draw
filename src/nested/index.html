<pug src="./src/nested/index.pug"></pug>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./index.css" />
  </head>

  <body ng-app="app" ng-class="'theme-' + theme" class="ng-scope theme-purple">
    <div class="loader-block" id="loader" style="display: none"></div>
    <div class="wrapper" ng-style="{'background-image': url_background}">
      <!-- uiView: --><ui-view class="ng-scope"
        ><id-lucky-draw
          data="$ctrl.data"
          setting="$ctrl.setting"
          results="$ctrl.results"
          is-limited="$ctrl.isLimited(r)"
          class="ng-scope ng-isolate-scope"
          ><header class="header">
            <div class="container-fluid">
              <div class="row">
                <div class="logo-zone hidden">
                  <!-- ngIf: $ctrl.setting.info.logo -->
                </div>

                <div class="col-xs-12">
                  <h1>
                    <!-- ngIf: $ctrl.appState.name !== 'presentation' --><span
                      class="event-name ng-binding ng-scope"
                      ng-if="$ctrl.appState.name !== 'presentation'"
                    >
                      Lucky Draw Software </span
                    ><!-- end ngIf: $ctrl.appState.name !== 'presentation' -->
                    <!-- ngIf: $ctrl.appState.name === 'presentation' && $ctrl.setting.info.name -->
                  </h1>
                </div>
              </div>
            </div>
          </header>

          <div
            ng-class="$ctrl.appState.name === 'presentation' ? 'main-padding' : 'main'"
            class="main"
          >
            <div class="container-fluid">
              <div class="row">
                <div class="col-xs-12">
                  <section class="section section-prize">
                    <div class="section-message">
                      <h2
                        ng-style="$ctrl.ux.style($ctrl.setting.colors.action_msg, 1)"
                        ng-class="$ctrl.animClass.message"
                        ng-switch=""
                        on="$ctrl.state"
                        class="winner-reveal"
                        style=""
                      >
                        <!-- ngSwitchWhen: ready -->
                        <!-- ngSwitchWhen: spin -->
                        <!-- ngSwitchWhen: reveal -->
                        <!-- ngSwitchWhen: complete|toconfirm|confirmed|cancel --><span
                          ng-switch-when="complete|toconfirm|confirmed|cancel"
                          ng-switch-when-separator="|"
                          class="winner-name ng-binding ng-scope"
                          ng-bind-html="$ctrl.namex"
                          style=""
                          >Quay số</span
                        ><!-- end ngSwitchWhen: -->
                      </h2>
                    </div>

                    <div
                      class="section-body"
                      ng-class="$ctrl.animClass.setprize"
                      style=""
                    >
                      <div
                        class="section-body-inner section-body-inner-primary"
                      >
                        <ul class="slots">
                          <!-- ngRepeat: n in $ctrl.machineSlots -->
                          <li
                            class="slot ng-scope slot-1of6 state-complete"
                            ng-repeat="n in $ctrl.machineSlots"
                            ng-class="'slot-1of'+$ctrl.slotsCss + ' state-'+$ctrl.state"
                            style="overflow: hidden"
                          >
                            <!-- ngRepeat: i in $ctrl.characters[n] -->
                            <div
                              class="slotMachineContainer"
                              style="
                                transition: 1.236s ease-out;
                                transform: matrix(1, 0, 0, 1, 0, 0);
                              "
                            >
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    >1</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >2</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >3</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >4</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >5</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >6</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >7</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >8</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >9</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                            </div>
                            <!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] --><!-- end ngRepeat: i in $ctrl.characters[n] -->

                            <!-- ngIf: !$ctrl.characters[n] -->
                          </li>
                          <!-- end ngRepeat: n in $ctrl.machineSlots -->
                          <li
                            class="slot ng-scope slot-1of6 state-complete"
                            ng-repeat="n in $ctrl.machineSlots"
                            ng-class="'slot-1of'+$ctrl.slotsCss + ' state-'+$ctrl.state"
                            style="overflow: hidden"
                          >
                            <!-- ngRepeat: i in $ctrl.characters[n] -->
                            <div
                              class="slotMachineContainer"
                              style="
                                transition: 1.978s ease-out;
                                transform: matrix(1, 0, 0, 1, 0, 0);
                              "
                            >
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    >1</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope"
                                ng-repeat="i in $ctrl.characters[n]"
                                style=""
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                  >
                                    2</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >3</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >4</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >5</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >6</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >7</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >8</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >9</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                            </div>
                          </li>
                          <!-- end ngRepeat: n in $ctrl.machineSlots -->
                          <li
                            class="slot ng-scope slot-1of6 state-complete"
                            ng-repeat="n in $ctrl.machineSlots"
                            ng-class="'slot-1of'+$ctrl.slotsCss + ' state-'+$ctrl.state"
                            style="overflow: hidden"
                          >
                            <!-- ngRepeat: i in $ctrl.characters[n] -->
                            <div
                              class="slotMachineContainer"
                              style="
                                transition: 2.156s ease-out;
                                transform: matrix(1, 0, 0, 1, 0, 0);
                              "
                            >
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    >1</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope"
                                ng-repeat="i in $ctrl.characters[n]"
                                style=""
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >2 </span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >3</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >4</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >5</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >6</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >7</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >8</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                              <div
                                class="slot-item ng-scope ng-enter-prepare"
                                ng-repeat="i in $ctrl.characters[n]"
                              >
                                <div
                                  class="slot-number"
                                  ng-switch=""
                                  on="$ctrl.state"
                                >
                                  <!-- ngSwitchWhen: ready -->
                                  <!-- ngSwitchWhen: setprize -->
                                  <!-- ngSwitchDefault: --><span
                                    ng-switch-default=""
                                    class="ng-binding ng-scope"
                                    style=""
                                    >9</span
                                  ><!-- end ngSwitchWhen: -->
                                </div>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>

                    <div class="section-actions">
                      <div class="section-head-actions">
                        <a
                          class="link-prev not-available"
                          ng-mouseover="$ctrl.ux.mOver('prevnext')"
                          ng-mouseleave="$ctrl.ux.mLeave('prevnext')"
                          ng-class="$ctrl.state !== 'ready' || $ctrl.prizeIndex <= 0 ? 'not-available' : 'available'"
                          ng-click="$ctrl.setPrize($ctrl.prizeIndex - 1)"
                          style=""
                        >
                          <!-- ngIf: $ctrl.ux.hint.prevnext -->
                          <i class="ion-chevron-left"></i>
                        </a>

                        <span
                          class="prize-text prize-count ion-person-add ng-binding"
                          ng-class="$ctrl.animClass.prizecount"
                          ng-show="$ctrl.prizes[$ctrl.prizeIndex].confirmed"
                          style=""
                        >
                          111 -> 999
                        </span>

                        <a
                          class="link-next not-available"
                          ng-mouseover="$ctrl.ux.mOver('prevnext')"
                          ng-mouseleave="$ctrl.ux.mLeave('prevnext')"
                          ng-class="$ctrl.state !== 'ready' || $ctrl.prizeIndex >= $ctrl.prizes.length - 1 ? 'not-available' : 'available'"
                          ng-click="$ctrl.setPrize($ctrl.prizeIndex + 1)"
                          style=""
                        >
                          <i class="ion-chevron-right"></i>
                          <!-- ngIf: $ctrl.ux.hint.prevnext -->
                        </a>
                      </div>

                      <div ng-switch="" on="$ctrl.state" class="section-button">
                        <!-- ngSwitchWhen: ready -->

                        <!-- ngSwitchWhen: spin -->

                        <!-- ngSwitchWhen: complete -->
                        <div
                          ng-switch-when="complete"
                          class="state-complete ng-scope"
                          style=""
                        >
                          <a
                            class="btn btn-yellow btn-yellow-secondary ng-binding"
                            ng-click="$ctrl.save()"
                            ng-mouseover="$ctrl.ux.mOver('confirm')"
                            ng-mouseleave="$ctrl.ux.mLeave('confirm')"
                          >
                            <!-- ngIf: $ctrl.ux.hint.confirm -->
                            Xác nhận
                          </a>
                          <a
                            class="btn btn-primary ng-binding"
                            ng-click="$ctrl.retry()"
                            ng-mouseover="$ctrl.ux.mOver('confirm')"
                            ng-mouseleave="$ctrl.ux.mLeave('confirm')"
                          >
                            Reset
                            <!-- ngIf: $ctrl.ux.hint.confirm -->
                          </a>
                        </div>
                        <!-- end ngSwitchWhen: -->
                      </div>
                    </div>
                  </section>
                </div>
              </div>
            </div>
          </div>

          <hot-keys
            enter="$ctrl.startstop()"
            nextstep=""
            confirm="$ctrl.save()"
            cancel="$ctrl.retry()"
            prev="$ctrl.setPrevPrize()"
            next="$ctrl.setNextPrize()"
            class="ng-isolate-scope"
          >
          </hot-keys>
        </id-lucky-draw>
      </ui-view>
      <notification class="ng-isolate-scope"></notification>
      <img width="1" height="1" appbackground="" ng-src="" />
    </div>

    <script>
      // document.addEventListener("DOMContentLoaded", () => {
      //   const slots = document.querySelectorAll(".slotMachineContainer");
      //   const spinButton = document.querySelector(".btn-yellow");

      //   // Hàm tạo số ngẫu nhiên từ 0 đến 9
      //   function getRandomNumber() {
      //     return Math.floor(Math.random() * 10);
      //   }

      //   // Hàm để dừng slot tại số ngẫu nhiên
      //   function stopSlot(slot, stopNumber, spinDuration) {
      //     const totalHeight = 1000; // 10 số, mỗi số cao 100px
      //     if (stopNumber == 1) {
      //       stopNumber = 2;
      //     }
      //     const stopPosition = stopNumber * 250; // Vị trí dừng dựa trên chiều cao 100px mỗi số
      //     const fullRotation = totalHeight * 3; // Quay 3 vòng đầy đủ

      //     // Đặt vị trí và dừng lại
      //     setTimeout(() => {
      //       slot.style.transition = `transform ${spinDuration}s ease-out`;
      //       slot.style.transform = `translateY(-${fullRotation + stopPosition}px)`;

      //       // Đặt lại vị trí sau khi dừng
      //       setTimeout(() => {
      //         console.log({ stopPosition });

      //         slot.style.transition = `none`;
      //         slot.style.transform = `translateY(-${stopPosition}px)`;
      //       }, spinDuration * 600);
      //     }, 100); // Delay để tạo hiệu ứng bắt đầu quay
      //   }

      //   // Hàm thực hiện hiệu ứng quay
      //   function spinSlots() {
      //     slots.forEach((slot, index) => {
      //       const spinDuration = 1.5 + Math.random(); // Thời gian quay từ 1.5s đến 2.5s
      //       const stopNumber = getRandomNumber(); // Số ngẫu nhiên để dừng

      //       // Dừng từng slot với hiệu ứng
      //       stopSlot(slot, stopNumber, spinDuration);
      //     });
      //   }

      //   // Gắn sự kiện vào nút "Quay"
      //   if (spinButton) {
      //     spinButton.addEventListener("click", spinSlots);
      //   } else {
      //     console.error("Không tìm thấy nút 'Quay'!");
      //   }
      // });

      document.addEventListener("DOMContentLoaded", () => {
        const slots = document.querySelectorAll(".slotMachineContainer");
        const spinButton = document.querySelector(".btn-yellow");
        const spinReset = document.querySelector(".btn-primary");

        const max = 999; // Maximum value for random number
        const min = 100; // Minimum value
        const num_icons = 10; // Number of icons (0-9)
        const icon_height = 250; // Height of each icon
        const max_translate_y = 2000; // Limit for translateY value
        const time_per_icon = 100; // Animation duration per icon
        let listWinnerNum = []; // List of used numbers

        // Generate unique random winner
        function randomWinner() {
          let randNum = Math.floor(Math.random() * (max - min + 1) + min);
          while (listWinnerNum.includes(randNum)) {
            randNum = Math.floor(Math.random() * (max - min + 1) + min);
          }
          listWinnerNum.push(randNum);
          if (listWinnerNum.length >= max - min + 1) listWinnerNum = [];
          return randNum;
        }

        // Reset slots to the initial state
        function resetSlots() {
          slots.forEach((slot) => {
            slot.style.transition = "none";
            slot.style.transform = "translateY(0px)";
          });
        }

        // Spin a single slot
        function roll(slot, offset, winner_num) {
          const delta =
            (offset + 2) * num_icons + (num_icons - +winner_num + 1);

          const spin_distance = delta * icon_height;
          const targetPositionY =
            spin_distance > max_translate_y
              ? spin_distance % max_translate_y
              : spin_distance;

          return new Promise((resolve) => {
            // Get the current Y position
            const style = getComputedStyle(slot);
            const transformMatrix = style.transform.match(/matrix.*\((.+)\)/);
            const currentPositionY = transformMatrix
              ? parseFloat(transformMatrix[1].split(",")[5])
              : 250; // Default to 250px for first spin

            if (spin_distance > max_translate_y) {
              // Exceeds max_translate_y, reset and animate
              setTimeout(() => {
                slot.style.transition = "none";
                slot.style.transform = `translateY(${currentPositionY % max_translate_y}px)`;

                setTimeout(() => {
                  slot.style.transition = `transform ${(9 + delta) * time_per_icon}ms cubic-bezier(.41,-0.01,.63,1.09)`;
                  slot.style.transform = `translateY(-${targetPositionY}px)`;
                }, 50);
              }, offset * 150);
            } else {
              // Normal animation within range
              setTimeout(() => {
                slot.style.transition = `transform ${(9 + delta) * time_per_icon}ms cubic-bezier(.41,-0.01,.63,1.09)`;
                slot.style.transform = `translateY(-${targetPositionY}px)`;
              }, offset * 150);
            }

            // Stop at the final normalized position
            setTimeout(
              () => {
                slot.style.transition = "none";
                slot.style.transform = `translateY(-${targetPositionY % max_translate_y}px)`;
                resolve(delta % num_icons);
              },
              (9 + delta) * time_per_icon + offset * 150,
            );
          });
        }

        // Spin all slots
        function rollAll() {
          // resetSlots();
          const reelsList = document.querySelectorAll(".slotMachineContainer");
          const randomNumber = randomWinner();
          const winnerNumArray = String(randomNumber)
            .padStart(3, "0")
            .split("");
          console.log("Winning Number:", randomNumber, winnerNumArray);

          Promise.all(
            [...reelsList].map((slot, index) =>
              roll(slot, index, winnerNumArray[index]),
            ),
          ).then(() => {
            document.querySelector(".slots")?.classList?.add("win1");
            setTimeout(() => {
              document.querySelector(".slots")?.classList?.remove("win1");
            }, 2000);
          });
        }

        // Disable button during spin
        function disableButton() {
          spinButton.disabled = true;
          setTimeout(() => {
            spinButton.disabled = false;
          }, 5000); // Adjust as needed
        }

        if (spinButton) {
          spinButton.addEventListener("click", () => {
            disableButton();
            rollAll();
          });
        } else {
          console.error("Spin button not found!");
        }

        if (spinReset) {
          spinReset.addEventListener("click", () => {
            resetSlots();
          });
        } else {
          console.error("Spin button not found!");
        }
      });
    </script>
  </body>
</html>
